<!-- ...dentro de la sidebar... -->
<div>
  <div class="brand-title">EG Health</div>
  <div class="brand-sub">
    Centro:
    <select id="centro-select" style="margin-left:4px; min-width:90px;"></select>
  </div>
</div>
<!-- ...resto igual... -->

<!-- En la topbar solo va el usuario y rol -->
<div class="topbar">
  <div class="user-info">
    <span class="user-name" id="user-name"></span>
    <span class="user-rol" id="user-rol"></span>
  </div>
</div>

<script type="module">
  const userName = localStorage.getItem('user_name') || localStorage.getItem('nombre_usuario') || 'Sin usuario';
  document.getElementById('user-name').textContent = userName;

  // ... Supabase y carga de centros igual, pero ahora el select está en la sidebar ...
  const profesionalId = localStorage.getItem('profesional_id');
  const centroId = localStorage.getItem('centro_medico_id');

  import { createClient } from "https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2/+esm";
  const supabaseUrl = 'https://vwkszvdvswznlgxlfdtz.supabase.co';
  const supabaseAnonKey = '...';
  const supabase = createClient(supabaseUrl, supabaseAnonKey);

  async function cargarCentrosUsuario() {
    let centros = [];
    if (profesionalId) {
      let { data, error } = await supabase
        .from('profesional_centro')
        .select('centro_id, centros_medicos(id, nombre)')
        .eq('profesional_id', profesionalId)
        .eq('activo', true);
      if (!error && data) {
        centros = data.filter(row=>row.centros_medicos).map(row=>({
          id: row.centros_medicos.id,
          nombre: row.centros_medicos.nombre
        }));
      }
    }
    return centros;
  }

  async function inicializarCentros() {
    const centros = await cargarCentrosUsuario();
    const centroSelect = document.getElementById('centro-select');
    centroSelect.innerHTML = '';
    centros.forEach(c => {
      const opt = document.createElement('option');
      opt.value = c.id;
      opt.textContent = c.nombre;
      centroSelect.appendChild(opt);
    });
    centroSelect.value = centroId || centros[0]?.id || '';
    centroSelect.onchange = function() {
      const seleccionado = centros.find(c=>c.id === this.value);
      localStorage.setItem('centro_medico_id', seleccionado.id);
      localStorage.setItem('centro_medico_nombre', seleccionado.nombre);
      // Aquí podrías recargar paneles según el nuevo centro
    }
  }

  await inicializarCentros();

  // ... resto igual ...
</script>
