<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Panel - EG Health Solutions</title>
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <link rel="stylesheet" href="app.css">
</head>
<body>
  <div class="app">
    <aside class="sidebar">
      <div>
        <div class="brand-title">EG Health</div>
        <div class="brand-sub">Centro: <span id="centro-nombre"></span></div>
      </div>
      <nav class="menu">
        <button id="btn-dashboard" class="active">Inicio</button>
        <button id="btn-pacientes">Pacientes</button>
        <button id="btn-profesionales">Profesionales</button>
        <div class="separator"></div>
        <div class="submenu-toggle" id="submenu-toggle">
          <span>Reportes</span>
          <span class="caret">&#9654;</span>
        </div>
        <div class="submenu-items" id="submenu-items">
          <button class="menu-subitem" id="btn-reporte-1">Turnos</button>
          <button class="menu-subitem" id="btn-reporte-2">Facturación</button>
        </div>
      </nav>
      <div class="settings-slot">
        <button class="settings-btn btn" id="btn-config">Configuración</button>
      </div>
    </aside>
    <main class="main">
      <div class="topbar">
        <div>
          <span class="badge" id="user-rol"></span>
        </div>
        <button class="btn" id="btn-logout">Cerrar sesión</button>
      </div>
      <div id="main-content" class="card">
        <h2>Bienvenido</h2>
        <p>Selecciona una opción del menú lateral.</p>
      </div>
    </main>
  </div>
  <script>
    // Mostrar nombre de centro médico y rol
    document.getElementById('centro-nombre').textContent = localStorage.getItem('centro_medico_nombre') || 'No asignado';
    document.getElementById('user-rol').textContent = localStorage.getItem('user_rol') || '';

    // Sidebar submenu toggle
    const submenuToggle = document.getElementById('submenu-toggle');
    const submenuItems = document.getElementById('submenu-items');
    submenuToggle.addEventListener('click', function() {
      submenuItems.classList.toggle('show');
      submenuToggle.classList.toggle('open');
    });

    // Ejemplo: cambiar contenido principal al hacer click en menú
    document.getElementById('btn-dashboard').addEventListener('click', function() {
      setActiveMenu(this);
      document.getElementById('main-content').innerHTML = `<h2>Bienvenido</h2><p>Selecciona una opción del menú lateral.</p>`;
    });
    document.getElementById('btn-pacientes').addEventListener('click', function() {
      setActiveMenu(this);
      document.getElementById('main-content').innerHTML = `<h2>Pacientes</h2><p>Aquí irá la gestión de pacientes...</p>`;
    });
    document.getElementById('btn-profesionales').addEventListener('click', function() {
      setActiveMenu(this);
      document.getElementById('main-content').innerHTML = `<h2>Profesionales</h2><p>Aquí irá la gestión de profesionales...</p>`;
    });
    document.getElementById('btn-reporte-1').addEventListener('click', function() {
      setActiveSubMenu(this);
      document.getElementById('main-content').innerHTML = `<h2>Reporte de turnos</h2><p>Gráficos e información de turnos.</p>`;
    });
    document.getElementById('btn-reporte-2').addEventListener('click', function() {
      setActiveSubMenu(this);
      document.getElementById('main-content').innerHTML = `<h2>Reporte de facturación</h2><p>Gráficos e información de facturación.</p>`;
    });
    document.getElementById('btn-config').addEventListener('click', function() {
      document.getElementById('main-content').innerHTML = `<h2>Configuración</h2><p>Opciones de configuración del sistema.</p>`;
    });
    document.getElementById('btn-logout').addEventListener('click', function() {
      localStorage.clear();
      window.location.href = "index.html";
    });

    function setActiveMenu(btn) {
      document.querySelectorAll('.menu button').forEach(b => b.classList.remove('active'));
      btn.classList.add('active');
      document.querySelectorAll('.menu-subitem').forEach(b => b.classList.remove('active'));
    }
    function setActiveSubMenu(btn) {
      setActiveMenu(null);
      document.querySelectorAll('.menu-subitem').forEach(b => b.classList.remove('active'));
      btn.classList.add('active');
    }
  </script>
</body>
</html>
