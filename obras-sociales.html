<!-- mis-consultas.html -->
<section class="page">
  <h2 style="margin:0 0 10px;color:#381e60;">Mis Consultas</h2>

  <div class="filters" style="display:flex;gap:12px;flex-wrap:wrap;align-items:end;margin-bottom:12px;">
    <label>Centro
      <select id="mc-centro" style="min-width:260px;">
        <option value="">Todos los centros</option>
      </select>
    </label>
    <label>Desde
      <input id="mc-desde" type="date">
    </label>
    <label>Hasta
      <input id="mc-hasta" type="date">
    </label>
    <button id="mc-aplicar" class="btn">Aplicar</button>
    <button id="mc-export"  class="btn secondary">Exportar CSV</button>
  </div>

  <div class="kpis" style="display:grid;grid-template-columns:repeat(4,minmax(140px,1fr));gap:10px;margin-bottom:10px;">
    <div class="card" style="padding:12px;"><div style="color:#6b6480;">Atenciones</div><div id="mc-kpi-atenciones" style="font-weight:700;font-size:20px;">—</div></div>
    <div class="card" style="padding:12px;"><div style="color:#6b6480;">Cobrado (período)</div><div id="mc-kpi-ingresos" style="font-weight:700;font-size:20px;">—</div></div>
    <div class="card" style="padding:12px;"><div style="color:#6b6480;">Pendiente (histórico)</div><div id="mc-kpi-pendiente" style="font-weight:700;font-size:20px;">—</div></div>
    <div class="card" style="padding:12px;"><div style="color:#6b6480;">Ticket promedio</div><div id="mc-kpi-ticket" style="font-weight:700;font-size:20px;">—</div></div>
  </div>

  <div class="card" style="padding:0;">
    <table style="width:100%;border-collapse:separate;border-spacing:0;">
      <thead>
        <tr style="background:#f7f9fb;color:#4f3b7a;">
          <th style="text-align:left;padding:10px 8px;">Fecha</th>
          <th style="text-align:left;padding:10px 8px;">Centro</th>
          <th style="text-align:left;padding:10px 8px;">Paciente</th>
          <th style="text-align:right;padding:10px 8px;">Importe esperado</th>
          <th style="text-align:right;padding:10px 8px;">Pagado</th>
          <th style="text-align:right;padding:10px 8px;">Pendiente</th>
        </tr>
      </thead>
      <tbody id="mc-tbody">
        <tr><td colspan="6" style="padding:14px;color:#6b6480;">Cargando…</td></tr>
      </tbody>
    </table>
  </div>

  <div class="card" style="padding:0;margin-top:12px;">
    <h3 style="margin:12px;color:#381e60;font-size:16px;">Cobros por medio (en el período)</h3>
    <table style="width:100%;border-collapse:separate;border-spacing:0;">
      <thead>
        <tr style="background:#f7f9fb;color:#4f3b7a;">
          <th style="text-align:left;padding:10px 8px;">Medio</th>
          <th style="text-align:right;padding:10px 8px;">Importe</th>
          <th style="text-align:right;padding:10px 8px;">%</th>
        </tr>
      </thead>
      <tbody id="mc-medios-body">
        <tr><td colspan="3" style="padding:14px;color:#6b6480;">Cargando…</td></tr>
      </tbody>
    </table>
  </div>
</section>
<script type="module">
  import { initMisConsultas } from './mis-consultas.js';
  initMisConsultas(document.currentScript.closest('.page'));
</script>
